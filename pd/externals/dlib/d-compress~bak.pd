#N canvas 320 80 929 599 10;
#X obj 95 -71 inlet~;
#X obj 178 423 outlet~;
#X obj 99 389 *~;
#X obj 266 209 moses;
#X obj 114 369 d-smooth~;
#X obj 266 283 line;
#X obj 190 28 dbtorms;
#X obj 305 95 * 10;
#N canvas 616 350 454 304 env 0;
#X obj 31 24 inlet~;
#X obj 34 151 outlet;
#X obj 25 83 env~ 256;
#X obj 216 47 block~ 256 4;
#X text 187 72 4x overlap for accurate enveloping;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X restore 192 -7 pd env;
#X obj -1 76 samplerate~;
#X obj -1 53 loadbang;
#X obj -2 122 /;
#X msg -2 100 256000 \$1;
#X obj 1 5 delwrite~ \$0-1blockdel 100;
#X obj -2 155 delread~ \$0-1blockdel 100;
#X obj 114 340 * 1;
#X obj 266 234 pack f 2;
#X obj 293 255 pack f 10;
#X obj 322 -20 inlet;
#X obj 377 -20 inlet;
#X obj 494 -18 inlet;
#X obj 494 53 dbtorms;
#X obj 494 30 + 100;
#X obj 322 14 d-default \$1 2;
#X obj 494 8 d-default \$3 0;
#X obj 377 50 d-default \$2 10;
#X text 32 -11 one block delay;
#X obj 161 199 moses 0.5;
#X msg 161 217 0.5;
#X obj 266 307 * 1;
#X obj 246 -59 inlet~ sidechain;
#X obj 190 -28 hip~ 500;
#X obj 306 123 + 0.75;
#X text 235 -5 oversampled;
#X text 452 116 inside 'pd env' we 4x oversample;
#X text 450 129 for general betterness;
#X floatatom 260 58 5 0 0 0 - - -;
#X floatatom 186 100 5 0 0 0 - - -;
#X text 359 247 if it is < current \, attack;
#X text 324 233 if gain factor > current \, decay;
#X obj 241 149 d-inv;
#X obj 340 309 d-graph;
#X msg 175 107 1;
#X obj 241 110 * 2;
#X obj 192 55 moses 0.6;
#X obj 241 81 / 0.6;
#X obj 439 195 /~;
#X obj 178 393 *~;
#X obj 540 215 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 380 272 clear;
#X obj 541 240 metro 500;
#X obj 450 310 d-graph~ 0 2 11025;
#X obj 461 169 max~ 0.02;
#X obj 401 169 sig~ 0.02;
#X obj 443 218 lop~ 5;
#X obj 220 369 *~ 1;
#N canvas 0 22 600 400 delay-writer 1;
#X obj 96 107 inlet~;
#X obj 96 180 outlet~;
#X obj 116 144 delwrite~ \$0-d2 1;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X restore 683 263 pd delay-writer;
#N canvas 244 341 280 330 delay-reader 0;
#X obj 94 107 inlet~;
#X obj 89 267 outlet~;
#X obj 112 163 inlet~;
#X obj 89 237 +~;
#X obj 112 198 vd~ \$0-d2;
#X obj 93 144 *~ 0;
#X connect 0 0 5 0;
#X connect 2 0 4 0;
#X connect 3 0 1 0;
#X connect 4 0 3 1;
#X connect 5 0 3 0;
#X restore 683 288 pd delay-reader;
#X obj 668 357 /~;
#X obj 668 334 max~ 0;
#X obj 668 312 -~;
#X obj 790 270 sig~;
#X obj 788 211 samplerate~;
#X obj 792 178 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 766 138 loadbang;
#X obj 790 230 d-inv;
#X obj 790 250 * 1000;
#X text 818 273 one sample delay;
#X obj 521 95 block~ 256;
#X text 597 439 else if requested gain > current gain \, decay;
#X text 601 423 if requested gain < current gain \, attack;
#X connect 0 0 13 0;
#X connect 0 0 31 0;
#X connect 3 0 16 0;
#X connect 3 1 17 0;
#X connect 4 0 2 1;
#X connect 5 0 3 1;
#X connect 5 0 29 0;
#X connect 6 0 36 0;
#X connect 6 0 41 0;
#X connect 6 0 44 0;
#X connect 7 0 32 0;
#X connect 8 0 6 0;
#X connect 9 0 12 0;
#X connect 10 0 9 0;
#X connect 11 0 14 0;
#X connect 12 0 11 0;
#X connect 14 0 2 0;
#X connect 14 0 47 0;
#X connect 15 0 4 0;
#X connect 16 0 5 0;
#X connect 17 0 5 0;
#X connect 18 0 23 0;
#X connect 19 0 25 0;
#X connect 20 0 24 0;
#X connect 21 0 15 1;
#X connect 21 0 55 1;
#X connect 22 0 21 0;
#X connect 23 0 16 1;
#X connect 24 0 22 0;
#X connect 25 0 17 1;
#X connect 27 0 28 0;
#X connect 27 1 3 0;
#X connect 28 0 3 0;
#X connect 29 0 15 0;
#X connect 30 0 8 0;
#X connect 31 0 8 0;
#X connect 31 0 52 0;
#X connect 40 0 3 0;
#X connect 42 0 3 0;
#X connect 43 0 40 0;
#X connect 44 0 42 0;
#X connect 44 1 45 0;
#X connect 45 0 37 0;
#X connect 45 0 43 0;
#X connect 46 0 54 0;
#X connect 46 0 56 0;
#X connect 47 0 1 0;
#X connect 48 0 50 0;
#X connect 49 0 41 0;
#X connect 50 0 49 0;
#X connect 50 0 51 1;
#X connect 52 0 46 1;
#X connect 53 0 46 0;
#X connect 54 0 51 0;
#X connect 54 0 55 0;
#X connect 54 0 60 0;
#X connect 55 0 47 1;
#X connect 56 0 57 0;
#X connect 57 0 60 1;
#X connect 59 0 58 0;
#X connect 59 0 58 1;
#X connect 60 0 59 0;
#X connect 61 0 57 1;
#X connect 62 0 65 0;
#X connect 63 0 62 0;
#X connect 64 0 62 0;
#X connect 65 0 66 0;
#X connect 66 0 61 0;

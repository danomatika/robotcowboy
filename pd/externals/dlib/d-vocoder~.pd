#N canvas 298 38 805 655 12;
#N canvas 0 110 565 454 hann-window 0;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0-hann 1024 float 0;
#X coords 0 1 1023 0 300 100 1;
#X restore 82 311 graph;
#X obj 378 165 osc~;
#X obj 378 190 *~ -0.5;
#X obj 378 214 +~ 0.5;
#X obj 331 247 tabwrite~ \$0-hann;
#X obj 38 173 /;
#X obj 127 142 samplerate~;
#X obj 38 251 s window-sec;
#X obj 177 204 swap;
#X obj 177 228 /;
#X obj 177 252 s window-hz;
#X obj 49 201 * 1000;
#X obj 49 228 s window-msec;
#X obj 38 115 t f b f;
#X msg 173 92 resize \$1;
#X obj 173 116 s \$0-hann;
#X obj 330 105 r window-hz;
#X msg 382 130 0;
#X obj 330 131 t f b;
#X obj 17 46 loadbang;
#X text 11 -30 calculate Hann window table (variable window size) and
constants window-hz (fundamental frequency of analysis) \, window-sec
and window-msec (analysis window size in seconds and msec).;
#X obj 38 88 f 1024;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 5 0 7 0;
#X connect 5 0 11 0;
#X connect 6 0 5 1;
#X connect 6 0 8 1;
#X connect 8 0 9 0;
#X connect 8 1 9 1;
#X connect 9 0 10 0;
#X connect 11 0 12 0;
#X connect 13 0 5 0;
#X connect 13 0 8 0;
#X connect 13 1 6 0;
#X connect 13 2 14 0;
#X connect 14 0 15 0;
#X connect 16 0 18 0;
#X connect 17 0 1 1;
#X connect 18 0 1 0;
#X connect 18 1 4 0;
#X connect 18 1 17 0;
#X connect 19 0 21 0;
#X connect 21 0 13 0;
#X restore 521 287 pd hann-window;
#X text 507 215 updated for Pd version 0.39;
#X obj 64 330 *~;
#X obj 25 330 *~;
#X obj 383 175 *~;
#X obj 342 175 *~;
#X obj 342 198 +~;
#X obj 24 2 *~;
#X obj 24 -23 inlet~;
#X obj 24 25 rfft~;
#X obj 24 379 *~;
#X obj 111 64 *~;
#X obj 342 152 rfft~;
#X obj 24 354 rifft~;
#X obj 24 402 outlet~;
#X obj 77 64 *~;
#X obj 77 87 +~;
#X text 428 227 modulus;
#X obj 77 239 *~;
#X obj 77 217 clip~;
#X obj 57 3 tabreceive~ \$0-hann;
#X obj 77 113 +~ 1e-20;
#X obj 78 299 *~ 0.00065;
#X obj 57 379 tabreceive~ \$0-hann;
#X obj 343 126 *~;
#X obj 343 101 inlet~;
#X obj 376 127 tabreceive~ \$0-hann;
#X obj 77 140 q8_rsqrt~;
#X obj 342 221 q8_sqrt~;
#X text 428 244 of control;
#X text 426 261 amplitude;
#X text 166 67 reciprocal;
#X text 169 86 modulus of;
#X text 165 106 filter input;
#X text 166 125 amplitude;
#X text 404 151 Fourier transform;
#X text 8 -153 Internal workings of the timbre stamping algorithm.
First the "filter input" is treated as in the compressor patch \, multiplying
each channel amplitude by one over its modulus (but limited by the
"squelch" parameter.) It is then multiplied by the modulus of the channel
amplitude for the control source (which is Fourier analyzed in parallel
with the filter input.);
#X text 115 241 multiply the two amplitude;
#X text 113 258 factors (for compression;
#X text 115 274 and to apply new timbre);
#X text 335 335 Adapted from Pd help patches (3.audio.examples/I06.timbre.stamp.pd)
;
#X obj 467 -2 inlet;
#X text 85 -22 tones to use as vocoder base;
#X text 408 101 control signal to vocode;
#X obj 467 21 route squelch;
#X obj 119 175 d-sq;
#X obj 119 196 * 0.01;
#X obj 467 45 d-default \$1 30;
#X text 468 382 part of dlib;
#X text 257 448 released under the GNU General Public License v3+;
#X text 375 409 copyright damian stewart 2008;
#X text 346 423 damian@frey.co.nz | www.frey.co.nz;
#X obj 570 -168 block~ 1024 4;
#X connect 2 0 13 1;
#X connect 3 0 13 0;
#X connect 4 0 6 1;
#X connect 5 0 6 0;
#X connect 6 0 28 0;
#X connect 7 0 9 0;
#X connect 8 0 7 0;
#X connect 9 0 15 0;
#X connect 9 0 15 1;
#X connect 9 0 3 0;
#X connect 9 1 11 0;
#X connect 9 1 11 1;
#X connect 9 1 2 0;
#X connect 10 0 14 0;
#X connect 11 0 16 1;
#X connect 12 0 5 0;
#X connect 12 0 5 1;
#X connect 12 1 4 0;
#X connect 12 1 4 1;
#X connect 13 0 10 0;
#X connect 15 0 16 0;
#X connect 16 0 21 0;
#X connect 18 0 22 0;
#X connect 19 0 18 0;
#X connect 20 0 7 1;
#X connect 21 0 27 0;
#X connect 22 0 2 1;
#X connect 22 0 3 1;
#X connect 23 0 10 1;
#X connect 24 0 12 0;
#X connect 25 0 24 0;
#X connect 26 0 24 1;
#X connect 27 0 19 0;
#X connect 28 0 18 1;
#X connect 41 0 44 0;
#X connect 44 0 47 0;
#X connect 45 0 46 0;
#X connect 46 0 19 2;
#X connect 47 0 45 0;

#N canvas 89 22 943 711 10;
#X obj 564 771 table \$0-0 88200;
#X obj 563 793 table \$0-1 88200;
#X obj 562 813 table \$0-2 88200;
#X obj 564 834 table \$0-3 88200;
#X obj 566 855 table \$0-4 88200;
#X obj 55 6 inlet~;
#X obj 95 901 outlet~;
#X obj 99 564 makefilename \$0-%d;
#X obj 33 323 f 0;
#X obj 66 323 + 1;
#X obj 103 322 % 5;
#X obj 556 563 tabwrite~ \$0-0;
#X text 33 304 playback current buffer counter;
#X obj 389 221 f 0;
#X obj 422 221 + 1;
#X obj 459 220 % 5;
#X obj 556 510 makefilename \$0-%d;
#X msg 556 536 stop \, set \$1 \, bang;
#X obj 282 5 inlet;
#X obj 481 273 del 2000;
#X obj 475 349 timer;
#X obj 132 386 route 0 1 2 3 4;
#X text 462 437 store length;
#X msg 669 181 stop;
#X obj 457 245 t f b f;
#X obj 459 393 f 0;
#X obj 566 193 t b b;
#X msg 521 346 2000;
#X obj 474 320 t b b b;
#X floatatom 188 368 5 0 0 0 - - -;
#X obj 264 763 vline~;
#X obj 31 593 t b b;
#X msg 241 723 0 10;
#X msg 288 720 1 10 \, 0 10 \$1;
#X obj 31 619 delay 10;
#X obj 279 34 route bang stop rec stoprec;
#X obj 475 371 min 2000;
#X obj 389 166 t b b;
#X obj 202 99 moses 1;
#X msg 251 155 bang;
#X obj 95 879 *~;
#X msg 201 71 100;
#X text 354 199 record current buffer counter;
#X obj 169 189 pipe 10;
#X obj 188 136 t b b;
#X obj 564 149 spigot;
#X msg 563 115 1;
#X msg 594 113 0;
#X text 617 139 only stop if we are recording;
#X obj 374 135 spigot;
#X msg 393 113 1;
#X msg 429 116 0;
#X obj 542 83 t b b;
#X obj 336 89 t b b;
#X text 314 150 only start if we're not already;
#X text 73 153 put nice volume;
#X text 86 166 ramps;
#X text 352 4 bang = start playing 100 \, stop = stop playing;
#X text 352 14 rec = start recording \, stoprec = stop recording;
#X text 262 782 avoid clicks;
#X text 506 665 todo: up to 8 buffers;
#X text 548 692 aftertouch for velocity;
#X text 549 679 buffer count adjustable;
#X obj 47 823 tabreadmix~ \$0-0;
#X obj 152 747 r chunksize;
#X obj 46 738 phasor~;
#X msg 30 651 0;
#X obj 99 615 t b a b;
#X msg 121 706 set \$1;
#X text 104 585 stop \, set \$1 \, start;
#X msg 98 650 0;
#X obj 49 712 sig~;
#X obj 356 581 r speed;
#X obj 356 604 t b f;
#X obj 342 631 * 1;
#X obj 16 769 d-bangonzero~;
#X obj 49 689 f 1;
#X obj 103 350 t f f;
#X text 507 26 <number> = play that volume (midi);
#X text 185 119 stop;
#X text 242 116 play;
#X obj 13 272 spigot;
#X msg 76 236 1;
#X msg 45 237 0;
#X obj 47 796 *~ 1;
#X obj 280 587 * 44.1;
#X obj 96 855 *~ 1;
#X obj 343 558 expr 1000/$f1;
#X floatatom 502 224 5 0 0 0 - - -;
#X obj 220 870 t f f;
#X obj 208 896 d-adsr~ 1 10 1 100 100;
#X obj 361 831 inlet;
#X obj 267 869 unpack 1 1 1 1;
#X text 151 859 envelope;
#X obj 426 500 r~ \$0-input-sig;
#X obj 54 44 s~ \$0-input-sig;
#X msg 238 194 0;
#X obj 208 800 r \$0-trig;
#X obj 208 821 moses 1;
#X obj 246 255 s \$0-trig;
#X obj 221 847 / 127;
#X floatatom 385 893 5 0 0 0 - - -;
#X obj 437 897 s \$0-rel;
#X obj 46 210 del 100;
#X obj 90 190 r \$0-rel;
#X obj 439 457 tabwrite \$0-len;
#X obj 703 343 table \$0-len 5;
#X obj 215 456 tabread \$0-len;
#X text 220 436 retrieve length;
#X obj 285 505 moses 10;
#X floatatom 268 480 5 0 0 0 - - -;
#X msg 41 175 stop;
#X floatatom 431 842 5 0 0 0 - - -;
#X floatatom 387 871 5 0 0 0 - - -;
#X msg 123 789 pitch \$1;
#X obj 122 769 d-default \$1 64;
#X obj 748 282 s \$0-len;
#X msg 751 264 const 0;
#X obj 752 236 r 5loop-clear;
#X msg 294 536 10;
#X connect 5 0 95 0;
#X connect 7 0 67 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 8 1;
#X connect 10 0 77 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 15 0 13 1;
#X connect 15 0 24 0;
#X connect 15 0 88 0;
#X connect 16 0 17 0;
#X connect 17 0 11 0;
#X connect 18 0 35 0;
#X connect 19 0 28 0;
#X connect 20 0 36 0;
#X connect 23 0 19 0;
#X connect 23 0 11 0;
#X connect 24 0 16 0;
#X connect 24 1 19 0;
#X connect 24 2 105 1;
#X connect 25 0 105 0;
#X connect 26 0 25 0;
#X connect 26 1 20 1;
#X connect 27 0 105 0;
#X connect 28 0 13 0;
#X connect 28 1 20 0;
#X connect 28 2 27 0;
#X connect 31 0 34 0;
#X connect 31 1 32 0;
#X connect 32 0 30 0;
#X connect 33 0 30 0;
#X connect 34 0 66 0;
#X connect 35 0 41 0;
#X connect 35 1 44 0;
#X connect 35 2 46 0;
#X connect 35 2 53 0;
#X connect 35 3 52 0;
#X connect 35 3 50 0;
#X connect 35 4 38 0;
#X connect 36 0 25 1;
#X connect 37 0 13 0;
#X connect 37 1 20 0;
#X connect 38 0 44 0;
#X connect 38 1 39 0;
#X connect 38 1 99 0;
#X connect 38 1 111 0;
#X connect 39 0 8 0;
#X connect 39 0 82 0;
#X connect 40 0 6 0;
#X connect 41 0 38 0;
#X connect 43 0 31 0;
#X connect 44 0 43 0;
#X connect 44 0 103 0;
#X connect 44 1 96 0;
#X connect 45 0 26 0;
#X connect 45 0 23 0;
#X connect 46 0 45 1;
#X connect 47 0 45 1;
#X connect 49 0 37 0;
#X connect 50 0 49 1;
#X connect 51 0 49 1;
#X connect 52 0 47 0;
#X connect 52 1 45 0;
#X connect 53 0 51 0;
#X connect 53 1 49 0;
#X connect 63 0 86 0;
#X connect 64 0 63 1;
#X connect 65 0 84 0;
#X connect 65 0 75 0;
#X connect 67 0 70 0;
#X connect 67 0 76 0;
#X connect 67 1 68 0;
#X connect 67 2 66 0;
#X connect 68 0 63 0;
#X connect 70 0 65 1;
#X connect 71 0 65 0;
#X connect 72 0 73 0;
#X connect 73 0 74 0;
#X connect 73 1 74 1;
#X connect 74 0 76 0;
#X connect 75 0 81 0;
#X connect 76 0 71 0;
#X connect 77 0 7 0;
#X connect 77 1 29 0;
#X connect 77 1 21 0;
#X connect 77 1 107 0;
#X connect 81 0 8 0;
#X connect 82 0 81 1;
#X connect 83 0 81 1;
#X connect 84 0 63 0;
#X connect 85 0 84 1;
#X connect 86 0 40 0;
#X connect 87 0 74 0;
#X connect 89 0 90 0;
#X connect 89 1 90 1;
#X connect 90 0 40 1;
#X connect 91 0 92 0;
#X connect 92 0 90 2;
#X connect 92 0 113 0;
#X connect 92 1 90 3;
#X connect 92 1 112 0;
#X connect 92 2 90 4;
#X connect 92 3 90 5;
#X connect 92 3 101 0;
#X connect 92 3 102 0;
#X connect 94 0 11 0;
#X connect 96 0 99 0;
#X connect 97 0 98 0;
#X connect 98 0 90 0;
#X connect 98 1 100 0;
#X connect 100 0 89 0;
#X connect 103 0 83 0;
#X connect 104 0 103 1;
#X connect 107 0 33 0;
#X connect 107 0 109 0;
#X connect 107 0 110 0;
#X connect 107 0 85 0;
#X connect 109 0 119 0;
#X connect 109 1 87 0;
#X connect 111 0 103 0;
#X connect 114 0 63 0;
#X connect 115 0 114 0;
#X connect 117 0 116 0;
#X connect 118 0 117 0;
#X connect 119 0 87 0;
#X coords 0 0 1 1 85 40 0;
